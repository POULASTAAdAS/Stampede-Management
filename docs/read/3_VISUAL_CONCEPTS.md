# ğŸ¨ Visual Concepts Guide

This document uses diagrams and visual examples to explain key concepts. Perfect for visual learners!

---

## ğŸ“‹ Table of Contents

1. [System Overview Diagram](#system-overview-diagram)
2. [How Detection Works](#how-detection-works)
3. [Tracking Across Frames](#tracking-across-frames)
4. [Perspective Transformation](#perspective-transformation)
5. [Grid System and Occupancy](#grid-system-and-occupancy)
6. [Alert System Timeline](#alert-system-timeline)
7. [Display Modes Explained](#display-modes-explained)
8. [Data Structures Visualized](#data-structures-visualized)

---

## ğŸ—ï¸ System Overview Diagram

### Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER STARTS SYSTEM                       â”‚
â”‚                        (runs main.py)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INITIALIZATION PHASE                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Load configuration (settings)                         â”‚  â”‚
â”‚  â”‚ 2. Load AI model (YOLOv8)                               â”‚  â”‚
â”‚  â”‚ 3. Open camera                                           â”‚  â”‚
â”‚  â”‚ 4. Calibrate camera (user clicks 4 points)              â”‚  â”‚
â”‚  â”‚ 5. Initialize grid, tracker, visualizer                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONITORING LOOP (RUNS FOREVER)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 1. CAPTURE â”‚ Read frame from camera                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 2. DETECT  â”‚ Find people using YOLO AI              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ (every 3rd frame)                      â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 3. TRACK   â”‚ Match detections to existing tracks    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ (assign IDs)                           â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 4. CONVERT â”‚ Transform bounding boxes to world      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ coordinates (meters)                   â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 5. UPDATE  â”‚ Calculate occupancy per grid cell      â”‚  â”‚
â”‚  â”‚  â”‚   GRID     â”‚ Check for overcrowding                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ Trigger alerts if needed               â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 6. DRAW    â”‚ Create visualization (boxes, grid,     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ numbers, colors)                       â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 7. DISPLAY â”‚ Show on screen                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â†“                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚  â”‚
â”‚  â”‚  â”‚ 8. INPUT   â”‚ Check for key press (q, s, 1-5, etc)  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                         â”‚  â”‚
â”‚  â”‚        â”‚                                                 â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Loop back to step 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Loop runs 15-30 times per second!
```

---

## ğŸ” How Detection Works

### The YOLO AI Process

```
INPUT: Camera Frame
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚    ğŸ‘¤      ğŸ‘¤                      â”‚  Raw camera image
â”‚                                     â”‚  (1280 Ã— 720 pixels)
â”‚         ğŸ‘¤    ğŸ‘¤                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  YOLO MODEL   â”‚  AI analyzes the entire image
    â”‚   (yolov8n)   â”‚  Looking for person-shaped patterns
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
OUTPUT: Bounding Boxes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ID:1 â”‚     â”‚ ID:2 â”‚            â”‚  Boxes drawn around
â”‚  â”‚ 92%  â”‚     â”‚ 87%  â”‚            â”‚  each detected person
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚  With confidence scores
â”‚         â”‚ ID:3 â”‚  â”‚ ID:4 â”‚        â”‚
â”‚         â”‚ 78%  â”‚  â”‚ 91%  â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bounding Box Structure

```
Each detection is a list: [x1, y1, x2, y2, confidence]

Example: [320.5, 180.3, 480.7, 650.2, 0.87]
          â”‚      â”‚      â”‚      â”‚      â”‚
          â”‚      â”‚      â”‚      â”‚      â””â”€ Confidence: 87%
          â”‚      â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€ Bottom-right Y: 650 pixels
          â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bottom-right X: 480 pixels
          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Top-left Y: 180 pixels
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Top-left X: 320 pixels

Visual representation:
Screen (1280 Ã— 720 pixels)
  0    320        480
  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” 0
  â”‚     â”‚         â”‚       â”‚
  â”‚     â”‚ (x1,y1) â”‚       â”‚ 180
  â”‚     â”‚    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”   â”‚
  â”‚     â”‚    â”‚ğŸ‘¤  â”‚   â”‚   â”‚
  â”‚     â”‚    â”‚    â”‚   â”‚   â”‚
  â”‚     â”‚    â””â”€â”€â”€â”€â”¼â”€â”€â”€â”˜   â”‚ 650
  â”‚     â”‚  (x2,y2)â”‚       â”‚
  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜ 720
                            
Box area = (480 - 320) Ã— (650 - 180) = 160 Ã— 470 = 75,200 pixels
```

### Confidence Threshold

```
Detection confidence threshold = 0.35 (35%)

AI detections:
Detection 1: confidence = 0.92 (92%) âœ… KEEP (above threshold)
Detection 2: confidence = 0.68 (68%) âœ… KEEP (above threshold)
Detection 3: confidence = 0.45 (45%) âœ… KEEP (above threshold)
Detection 4: confidence = 0.28 (28%) âŒ DISCARD (below threshold)
Detection 5: confidence = 0.15 (15%) âŒ DISCARD (below threshold)

Lower threshold = More detections (but more false positives)
Higher threshold = Fewer detections (but more accurate)
```

---

## ğŸ·ï¸ Tracking Across Frames

### How Tracking Works (Frame by Frame)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 1 (Time: 0.00s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Detections:           Tracking Decision:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â†’ New person! Create Track #1
â”‚    ğŸ‘¤ (100,200) â”‚     Position: (100, 200)
â”‚                 â”‚     Age: 0
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 2 (Time: 0.03s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Detections:           Tracking Decision:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Detection at (105, 203)
â”‚    ğŸ‘¤ (105,203) â”‚   Distance from Track #1: âˆš((105-100)Â² + (203-200)Â²) = 5.8
â”‚                 â”‚   â†’ Close enough! Same person
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â†’ Update Track #1 to (105, 203), Age: 0

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 3 (Time: 0.06s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Detections:           Tracking Decision:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Detection 1 at (110, 206) â†’ Track #1 (update)
â”‚ğŸ‘¤ (110,206)     â”‚   Detection 2 at (400, 150) â†’ New person!
â”‚        ğŸ‘¤       â”‚   â†’ Create Track #2
â”‚      (400,150)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 4 (Time: 0.09s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Detections:           Tracking Decision:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Detection 1 at (405, 152) â†’ Track #2 (update)
â”‚                 â”‚   NO detection near Track #1!
â”‚        ğŸ‘¤       â”‚   â†’ Track #1 Age increases to 1
â”‚      (405,152)  â”‚   â†’ Track #1 position stays at last known (110, 206)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 5-34 (Time: 0.12s - 1.00s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Track #1 continues to have no detection...
Age increases: 2, 3, 4, ... 30

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FRAME 35 (Time: 1.03s)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Track #1 Age = 31 (exceeds max_age = 30)
â†’ Track #1 REMOVED (person left the scene)
â†’ Only Track #2 remains
```

### Distance Matching Algorithm

```
Current tracks:              New detections:
Track #1 at (100, 200)      Detection A at (105, 203)
Track #2 at (300, 150)      Detection B at (298, 152)
Track #3 at (500, 400)      Detection C at (450, 450)
                            Detection D at (600, 100) [NEW]

Calculate distances:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚ Track #1   â”‚ Track #2   â”‚ Track #3   â”‚ Unmatched  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Det A    â”‚ 5.8 âœ…     â”‚ 206.9      â”‚ 447.4      â”‚            â”‚
â”‚ Det B    â”‚ 209.2      â”‚ 2.8 âœ…     â”‚ 334.0      â”‚            â”‚
â”‚ Det C    â”‚ 510.2      â”‚ 350.7      â”‚ 70.7 âœ…    â”‚            â”‚
â”‚ Det D    â”‚ 590.2      â”‚ 374.4      â”‚ 360.6      â”‚ NEW âœ…     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result:
Track #1 â† Detection A (distance: 5.8, update position)
Track #2 â† Detection B (distance: 2.8, update position)
Track #3 â† Detection C (distance: 70.7, update position)
Track #4 â† Detection D (new track created)
```

---

## ğŸ“ Perspective Transformation

### The Problem: Camera Perspective

```
CAMERA VIEW (What the camera sees):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚ â† Far away (small)
â”‚    â–¢ â–¢ â–¢                           â”‚
â”‚                                     â”‚
â”‚     â–¢  â–¢  â–¢                        â”‚
â”‚                                     â”‚
â”‚       â–¢â–¢   â–¢â–¢   â–¢â–¢                 â”‚
â”‚                                     â”‚
â”‚         â–¢â–¢â–¢  â–¢â–¢â–¢  â–¢â–¢â–¢              â”‚ â† Close (big)
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problem: Can't measure distances directly!
- People far away look small
- People close look big
- Distances are distorted
```

### The Solution: Calibration

```
STEP 1: User clicks 4 corners of a known rectangular area

Camera View:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  *1                            *2   â”‚ â† Top-left and Top-right
â”‚   â•±                             â•²   â”‚   (clicked by user)
â”‚  â•±                               â•²  â”‚
â”‚ â•±                                 â•² â”‚
â”‚â•±                                   â•²â”‚
â”‚                                     â”‚
â”‚â•²                                   â•±â”‚
â”‚ â•²                                 â•± â”‚
â”‚  â•²                               â•±  â”‚
â”‚   â•²                             â•±   â”‚
â”‚  *4                            *3   â”‚ â† Bottom-left and Bottom-right
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   (clicked by user)

STEP 2: User enters real dimensions
Width: 10 meters
Height: 8 meters

STEP 3: System creates transformation

Image Points:                World Points:
*1 = (150, 50)      â†’       (0, 0)
*2 = (1130, 80)     â†’       (10, 0)
*3 = (1100, 680)    â†’       (10, 8)
*4 = (180, 650)     â†’       (0, 8)

                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  OpenCV Creates  â”‚
                 â”‚ Transformation   â”‚
                 â”‚     Matrix       â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  H_matrix: Image â†’ World       â”‚
         â”‚  inv_H_matrix: World â†’ Image   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bird's Eye View (After Transformation)

```
BEFORE (Camera view):        AFTER (Bird's eye view):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–¢ â–¢ â–¢       â”‚            â”‚ â–¢  â–¢  â–¢      â”‚
â”‚   â–¢  â–¢  â–¢    â”‚     â†’      â”‚ â–¢  â–¢  â–¢      â”‚
â”‚    â–¢â–¢   â–¢â–¢   â”‚            â”‚ â–¢  â–¢  â–¢      â”‚
â”‚     â–¢â–¢â–¢  â–¢â–¢â–¢ â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            All same size now!
Perspective distortion       Overhead view
```

### Coordinate Conversion Examples

```
Example 1: Person's feet at pixel (640, 500)
â†’ Transform to world: (5.2m, 3.8m)

Example 2: Grid line at 4 meters from origin
â†’ Transform to pixels: Draw from (200, 100) to (1080, 120)

Example 3: Person's bounding box
Corners in pixels:         Corners in world:
(320, 180)     â†’          (2.5, 1.8)
(480, 180)     â†’          (3.5, 1.8)
(480, 650)     â†’          (3.5, 4.2)
(320, 650)     â†’          (2.5, 4.2)

Forms a polygon in real-world coordinates!
```

---

## ğŸ“Š Grid System and Occupancy

### Grid Creation

```
World dimensions: 12m wide Ã— 8m tall
Cell size: 2m Ã— 2m

Grid calculation:
Columns = âŒˆ12 Ã· 2âŒ‰ = 6 columns
Rows = âŒˆ8 Ã· 2âŒ‰ = 4 rows

Resulting grid (4 rows Ã— 6 columns):
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€ï¿½ï¿½â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚0,0 â”‚0,1 â”‚0,2 â”‚0,3 â”‚0,4 â”‚0,5 â”‚  Row 0
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚1,0 â”‚1,1 â”‚1,2 â”‚1,3 â”‚1,4 â”‚1,5 â”‚  Row 1
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚2,0 â”‚2,1 â”‚2,2 â”‚2,3 â”‚2,4 â”‚2,5 â”‚  Row 2
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚3,0 â”‚3,1 â”‚3,2 â”‚3,3 â”‚3,4 â”‚3,5 â”‚  Row 3
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
 Col0 Col1 Col2 Col3 Col4 Col5

Each cell is 2m Ã— 2m = 4 mÂ² area
```

### Cell Capacity Calculation

```
Given:
- Cell area: 4 mÂ² (2m Ã— 2m)
- Person radius: 0.5m (personal space needed)

Calculation:
Person area = Ï€ Ã— rÂ² = 3.14159 Ã— (0.5)Â² = 0.785 mÂ²

Cell capacity = Cell area Ã· Person area
              = 4 Ã· 0.785
              = 5.09
              â‰ˆ 5 people per cell

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ ğŸ‘¤ ğŸ‘¤  â”‚  5 people can comfortably
â”‚  ğŸ‘¤ ğŸ‘¤    â”‚  fit in a 2m Ã— 2m cell
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
2m Ã— 2m cell
```

### Person-to-Cell Mapping

```
Person spans multiple cells:

World view (top-down):
     0m      2m      4m      6m
  0m â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
     â”‚       â”‚  30%  â”‚  10%  â”‚
     â”‚       â”‚   â•”â•â•â•â•ªâ•â•â•â•—   â”‚
  2m â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â•«â•â•â•â•ªâ•â•â•â•¬â”€â”€â”€â”¤
     â”‚       â”‚  40%  â”‚  20%  â”‚
     â”‚       â”‚   â•šâ•â•â•â•ªâ•â•â•â•   â”‚
  4m â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
               Person
               
Person's footprint: 100%
Cell (0,1) overlap: 30% â†’ Add 0.3 to cell count
Cell (0,2) overlap: 10% â†’ Add 0.1 to cell count
Cell (1,1) overlap: 40% â†’ Add 0.4 to cell count
Cell (1,2) overlap: 20% â†’ Add 0.2 to cell count

Total: 0.3 + 0.1 + 0.4 + 0.2 = 1.0 âœ“ (person fully accounted for)
```

### EMA Smoothing Visualization

```
WITHOUT SMOOTHING (raw counts):
Time:   0.0s  0.5s  1.0s  1.5s  2.0s  2.5s  3.0s  3.5s  4.0s
Count:   3  â†’  5  â†’  2  â†’  6  â†’  4  â†’  2  â†’  5  â†’  3  â†’  4
Graph:
 6 â”‚    â•±â•²     â•±â•²
 5 â”‚   â•±  â•²   â•±  â•²
 4 â”‚  â•±    â•² â•±    â•²â”€â”€
 3 â”‚â”€â”€      â•±      â•²â”€â”€
 2 â”‚        â•²â”€â”€â”€â”€â”€â”€â”€
 1 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ time
   Very jumpy! Hard to read!

WITH EMA SMOOTHING (Î± = 0.4):
Time:   0.0s  0.5s  1.0s  1.5s  2.0s  2.5s  3.0s  3.5s  4.0s
Count:   3  â†’  3.8â†’  3.3â†’  4.3â†’  4.2â†’  3.5â†’  4.1â†’  3.7â†’  3.8
Graph:
 6 â”‚
 5 â”‚
 4 â”‚    â•­â”€â”€â”€â•®  â•­â”€â•®
 3 â”‚â”€â”€â”€â”€â•¯   â•°â”€â”€â•¯ â•°â”€â”€â”€
 2 â”‚
 1 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ time
   Smooth! Easy to read!

Formula:
new_value = (0.4 Ã— current_count) + (0.6 Ã— old_value)

Example:
At t=0.5s: raw=5, old=3.0
new = (0.4 Ã— 5) + (0.6 Ã— 3.0) = 2.0 + 1.8 = 3.8
```

### Occupancy Heat Map

```
Grid with counts (4 rows Ã— 6 columns):
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ 0.5  â”‚ 1.2  â”‚ 2.3  â”‚ 3.8  â”‚ 2.1  â”‚ 0.8  â”‚  Cell capacity = 5
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1.1  â”‚ 3.2  â”‚ 5.7  â”‚ 6.2  â”‚ 4.1  â”‚ 1.5  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0.3  â”‚ 2.8  â”‚ 4.9  â”‚ 5.1  â”‚ 3.3  â”‚ 0.9  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0.0  â”‚ 0.7  â”‚ 1.8  â”‚ 2.4  â”‚ 1.2  â”‚ 0.4  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

Color coding:
ğŸŸ¢ Green (0-2.5):    Low occupancy, safe
ğŸŸ¡ Yellow (2.5-4):   Medium occupancy, normal
ğŸŸ  Orange (4-5):     High occupancy, warning
ğŸ”´ Red (>5):         Overcapacity, danger!

Visualization:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢  â”‚ ğŸŸ¢  â”‚ ğŸŸ¡  â”‚ ğŸŸ¡  â”‚ ğŸŸ¡  â”‚ ğŸŸ¢  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢  â”‚ ğŸŸ¡  â”‚ ğŸ”´  â”‚ ğŸ”´  â”‚ ğŸŸ   â”‚ ğŸŸ¢  â”‚  â† 2 alerts!
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢  â”‚ ğŸŸ¡  â”‚ ğŸŸ   â”‚ ğŸ”´  â”‚ ğŸŸ¡  â”‚ ğŸŸ¢  â”‚  â† 1 alert!
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢  â”‚ ğŸŸ¢  â”‚ ğŸŸ¢  â”‚ ğŸŸ¡  â”‚ ğŸŸ¢  â”‚ ğŸŸ¢  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¨ Alert System Timeline

### Hysteresis Explained

```
Why hysteresis? Prevent false alarms!

WITHOUT HYSTERESIS (immediate alert):
Time:    0s    1s    2s    3s    4s    5s
Count:   4  â†’  6  â†’  5  â†’  6  â†’  4  â†’  5
Alert:   â”€â”€â”€â”€â”€ONâ”€â”€â”€â”€OFFâ”€â”€â”€ONâ”€â”€â”€â”€OFFâ”€â”€â”€ON   â† Annoying!

WITH HYSTERESIS (3 second delay):
Time:    0s    1s    2s    3s    4s    5s    6s    7s
Count:   4  â†’  6  â†’  6  â†’  6  â†’  4  â†’  5  â†’  5  â†’  4
Timer:   0  â†’  1  â†’  2  â†’  3  â†’  2  â†’  1  â†’  0  â†’  0
Alert:   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OFFâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                          â†‘              â†‘
                      Alert fires    Alert clears
                      after 3s       after sustained decrease
```

### Detailed Timeline Example

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Cell (2,3) - Capacity: 5 people
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

t=0.0s:  Count=3.5, Timer=0.0, Alert=âŒ
         Status: Normal operation

t=1.0s:  Count=5.2, Timer=0.0â†’1.0, Alert=âŒ
         Status: Overcrowded! Timer starts

t=2.0s:  Count=5.8, Timer=1.0â†’2.0, Alert=âŒ
         Status: Still overcrowded, timer increases

t=3.0s:  Count=5.5, Timer=2.0â†’3.0, Alert=âŒâ†’ğŸš¨
         Status: Timer reaches 3.0s threshold
         Action: ALERT TRIGGERED!
         Log: "OVERCAPACITY ALERT - Cell (2,3) occupancy: 5.5/5"

t=4.0s:  Count=5.3, Timer=3.0â†’4.0, Alert=ğŸš¨
         Status: Alert active, still overcrowded

t=5.0s:  Count=4.8, Timer=4.0â†’3.9, Alert=ğŸš¨
         Status: Count dropped below capacity, timer decreases

t=6.0s:  Count=4.2, Timer=3.9â†’2.9, Alert=ğŸš¨
         Status: Timer continues decreasing

t=7.0s:  Count=3.8, Timer=2.9â†’1.9, Alert=ğŸš¨
         Status: Getting better...

t=8.0s:  Count=3.5, Timer=1.9â†’0.9, Alert=ğŸš¨
         Status: Almost clear...

t=9.0s:  Count=3.2, Timer=0.9â†’0.0, Alert=ğŸš¨â†’âŒ
         Status: Alert cleared!
         Log: "Alert cleared for cell (2,3)"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Summary:
- Overcrowding started at t=1.0s
- Alert triggered at t=3.0s (after 3s delay)
- Situation improved at t=5.0s
- Alert cleared at t=9.0s (after sustained decrease)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ–¼ï¸ Display Modes Explained

### Mode 1: Raw Camera

```
â”Œï¿½ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode: Raw Camera                    â”‚
â”‚                                     â”‚
â”‚    ğŸ‘¤      ğŸ‘¤                      â”‚
â”‚                                     â”‚  Just camera feed
â”‚         ğŸ‘¤    ğŸ‘¤                   â”‚  No overlays
â”‚                                     â”‚  No boxes
â”‚                                     â”‚  No grid
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode 2: Grid Overlay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode: Grid Overlay                  â”‚
â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”          â”‚
â”‚ â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚          â”‚  Camera feed +
â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤          â”‚  Green grid lines
â”‚ â”‚   â”‚ğŸ‘¤ â”‚   â”‚ğŸ‘¤ â”‚   â”‚   â”‚          â”‚  Shows cell boundaries
â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤          â”‚
â”‚ â”‚   â”‚   â”‚ğŸ‘¤ â”‚ğŸ‘¤ â”‚   â”‚   â”‚          â”‚
â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode 3: Detection View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode: Detection View                â”‚
â”‚ People detected: 4                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  Camera feed +
â”‚  â”‚ ID:17  â”‚      â”‚ ID:18  â”‚        â”‚  Bounding boxes
â”‚  â”‚  ğŸ‘¤    â”‚      â”‚  ğŸ‘¤    â”‚        â”‚  Person IDs
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  Confidence scores
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚ ID:19  â”‚  â”‚ ID:20  â”‚    â”‚
â”‚         â”‚  ğŸ‘¤    â”‚  â”‚  ğŸ‘¤    â”‚    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode 4: Monitoring View (Default)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode: Monitoring View               â”‚
â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”          â”‚
â”‚ â”‚1.2â”‚2.3â”‚3.8â”‚2.1â”‚0.8â”‚   â”‚ â† Cell   â”‚  Everything together:
â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   counts â”‚  - Camera feed
â”‚ â”‚ â”Œâ”€â”´â”€â”â”‚5.7â”‚6.2â”‚4.1â”‚1.5â”‚          â”‚  - Grid lines
â”‚ â”‚ â”‚17 â”‚â”‚   â”‚   â”‚   â”‚   â”‚          â”‚  - Bounding boxes
â”‚ â”œâ”€â”´â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤        â”‚  - Cell occupancy
â”‚ â”‚2.8  â”‚4.9â”‚ â”Œâ”€â”´â”€â”â”‚3.3â”‚0.9â”‚          â”‚  - Color coding
â”‚ â”‚     â”‚   â”‚ â”‚18 â”‚â”‚   â”‚   â”‚          â”‚  - Info panel
â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”´â”€â”€â”€â”´â”´â”€â”€â”€â”´â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ People: 4 | Capacity: 120 | Grid: 4Ã—6 â”‚ â† Info panel
â”‚ ALERTS: 2 cells over capacity!        â”‚
â”‚ Frame: 1250 | Mode: Monitoring View   â”‚
â”‚ Controls: 1-5 (modes) | q (quit)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mode 5: Split View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode: Split View                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ RAW CAMERA  â”‚ WITH GRID   â”‚       â”‚
â”‚ â”‚  ğŸ‘¤   ğŸ‘¤    â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚       â”‚  Four views:
â”‚ â”‚     ğŸ‘¤  ğŸ‘¤  â”‚â”‚ğŸ‘¤ â”‚   â”‚ğŸ‘¤ â”‚â”‚       â”‚  Top-left: Raw
â”‚ â”‚             â”‚â”‚   â”‚ğŸ‘¤ â”‚ğŸ‘¤ â”‚â”‚       â”‚  Top-right: Grid
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚  Bottom-left: Detection
â”‚ â”‚ DETECTION   â”‚ BIRD'S EYE  â”‚       â”‚  Bottom-right: Bird's eye
â”‚ â”‚â”Œâ”€â”€â”   â”Œâ”€â”€â” â”‚â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”â”‚       â”‚
â”‚ â”‚â”‚17â”‚   â”‚18â”‚ â”‚â”‚1.2â”‚2.3â”‚0.8â”‚â”‚       â”‚
â”‚ â”‚â””â”€â”€â”˜   â””â”€â”€â”˜ â”‚â”‚3.5â”‚ğŸ‘¤â”‚1.1â”‚â”‚       â”‚
â”‚ â”‚ â”Œâ”€â”€â” â”Œâ”€â”€â”  â”‚â”‚0.7â”‚ğŸ‘¤â”‚ğŸ‘¤â”‚â”‚       â”‚
â”‚ â”‚ â”‚19â”‚ â”‚20â”‚  â”‚â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜â”‚       â”‚
â””â”€â”´â”€â”€â”€â”´â”€â”´â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Data Structures Visualized

### TrackData Object

```
TrackData for Person #17:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ track_id: 17                         â”‚ â† Unique identifier
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bbox: (320, 180, 480, 650)          â”‚ â† Bounding box
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   (x1, y1, x2, y2)
â”‚   â”‚ (320,180)           â”‚           â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚           â”‚
â”‚   â”‚    â”‚  ğŸ‘¤    â”‚       â”‚           â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚           â”‚
â”‚   â”‚           (480,650) â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ world_position: (5.2, 3.8)          â”‚ â† Real-world position
â”‚   "5.2 meters right, 3.8 meters up" â”‚   (in meters)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ confidence: 0.87                     â”‚ â† Detection confidence
â”‚   "87% sure this is a person"       â”‚   (0.0 to 1.0)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ age: 0                              â”‚ â† Frames since last detection
â”‚   "Just detected this frame"        â”‚   (0 = fresh, 30+ = remove)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ confirmed: True                      â”‚ â† Track is reliable
â”‚   "This track is stable"            â”‚   (not a flicker)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MonitoringConfig Object

```
MonitoringConfig (all settings):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIDEO SETTINGS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ source: "0"                          â”‚ â† Camera/video source
â”‚ model_path: "model/yolov8n.pt"      â”‚ â† AI model location
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GRID SETTINGS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ cell_width: 2.0 m                    â”‚ â† Grid cell dimensions
â”‚ cell_height: 2.0 m                   â”‚
â”‚ person_radius: 0.5 m                 â”‚ â† Personal space
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DETECTION SETTINGS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ detect_every: 3 frames               â”‚ â† Run AI every Nth frame
â”‚ confidence_threshold: 0.35           â”‚ â† Min confidence (35%)
â”‚ min_bbox_area: 1500 pixels           â”‚ â† Min detection size
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TRACKING SETTINGS                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ use_deepsort: False                  â”‚ â† Tracker type
â”‚ max_age: 30 frames                   â”‚ â† Track lifetime
â”‚ n_init: 1 frame                      â”‚ â† Confirmation frames
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SMOOTHING & ALERTS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ema_alpha: 0.4                       â”‚ â† Smoothing factor
â”‚ fps: 15.0                            â”‚ â† Expected frame rate
â”‚ hysteresis_time: 3.0 seconds         â”‚ â† Alert delay
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INTERACTIVE FEATURES                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ enable_screenshots: True             â”‚ â† 's' key enabled
â”‚ enable_grid_adjustment: True         â”‚ â† 'g' key enabled
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### OccupancyGrid Arrays

```
Grid structure (4 rows Ã— 6 columns example):

1. ema_counts (smoothed occupancy):
   Type: numpy array of floats
   â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
   â”‚ 0.5  â”‚ 1.2  â”‚ 2.3  â”‚ 3.8  â”‚ 2.1  â”‚ 0.8  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1.1  â”‚ 3.2  â”‚ 5.7  â”‚ 6.2  â”‚ 4.1  â”‚ 1.5  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0.3  â”‚ 2.8  â”‚ 4.9  â”‚ 5.1  â”‚ 3.3  â”‚ 0.9  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0.0  â”‚ 0.7  â”‚ 1.8  â”‚ 2.4  â”‚ 1.2  â”‚ 0.4  â”‚
   â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

2. timers (overcrowding duration):
   Type: numpy array of floats (seconds)
   â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
   â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0.0  â”‚ 0.0  â”‚ 3.5  â”‚ 4.2  â”‚ 0.0  â”‚ 0.0  â”‚ â† Overcrowded!
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 2.8  â”‚ 0.0  â”‚ 0.0  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚ 0.0  â”‚
   â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜

3. notified (alert status):
   Type: numpy array of booleans
   â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
   â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚
   â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
   â”‚ âŒ â”‚ âŒ â”‚ ğŸš¨ â”‚ ğŸš¨ â”‚ âŒ â”‚ âŒ â”‚ â† Alerts active!
   â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
   â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚
   â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
   â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚ âŒ â”‚
   â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

### Memory Layout

```
Typical memory usage:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ YOLO Model: ~12 MB                     â”‚ â† AI model weights
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Video Frame: ~2.7 MB                   â”‚ â† 1280Ã—720Ã—3 bytes
â”‚ (1280 Ã— 720 Ã— 3 bytes RGB)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ OccupancyGrid Arrays: ~1 KB            â”‚ â† Small!
â”‚ - ema_counts: 4Ã—6Ã—4 bytes = 96 bytes  â”‚
â”‚ - timers: 4Ã—6Ã—4 bytes = 96 bytes      â”‚
â”‚ - notified: 4Ã—6Ã—1 bytes = 24 bytes    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Track Dictionary: ~1 KB                â”‚ â† Track data
â”‚ (assuming 50 tracks Ã— 20 bytes each)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Other variables: ~100 KB               â”‚ â† Misc data
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total: ~15-16 MB (very efficient!)
```

---

## ğŸ“ Summary

This visual guide covered:

âœ… **System architecture** - How components connect
âœ… **Detection process** - How AI finds people
âœ… **Tracking mechanism** - How people are followed
âœ… **Perspective transformation** - Pixels to meters conversion
âœ… **Grid system** - Area division and occupancy calculation
âœ… **Alert system** - Hysteresis and timing
âœ… **Display modes** - Different visualization options
âœ… **Data structures** - How information is stored

**Key visual concepts:**

- ğŸ“ Perspective makes distant objects look smaller
- ğŸ·ï¸ Tracking uses distance to match people across frames
- ğŸ“Š Grid divides area into cells for monitoring
- â±ï¸ Hysteresis prevents false alarms
- ğŸ¨ Colors indicate danger levels (greenâ†’yellowâ†’orangeâ†’red)

Now you can "see" how the code works! ğŸ‰

---

**Made with â¤ï¸ for visual learners!** ğŸ‘€
